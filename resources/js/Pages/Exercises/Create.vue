<template>
    <AuthenticatedLayout>
        <template #header>
            <div class="flex justify-between items-center">
                <h2 class="font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight">
                    –°–æ–∑–¥–∞—Ç—å —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ
                </h2>
                <PrimaryButton @click="router.visit('/exercises')">
                    ‚Üê –ù–∞–∑–∞–¥ –∫ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è–º
                </PrimaryButton>
            </div>
        </template>

        <div class="py-12">
            <div class="max-w-2xl mx-auto sm:px-6 lg:px-8">
                <div class="bg-white overflow-hidden shadow-sm sm:rounded-lg dark:bg-gray-800 dark:shadow-gray-900/20">
                    <div class="p-6 text-gray-900 dark:text-gray-100">
                        <form @submit.prevent="submit">
                            <div class="space-y-6">
                                <!-- –ù–∞–∑–≤–∞–Ω–∏–µ -->
                                <div>
                                    <InputLabel for="title" value="–ù–∞–∑–≤–∞–Ω–∏–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è" />
                                    <TextInput
                                        id="title"
                                        v-model="form.title"
                                        type="text"
                                        class="mt-1 block w-full"
                                        required
                                        autofocus
                                        placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ì–∞–º–º—ã –¥–æ –º–∞–∂–æ—Ä"
                                    />
                                    <InputError class="mt-2" :message="form.errors.title" />
                                </div>

                                <!-- –û–ø–∏—Å–∞–Ω–∏–µ -->
                                <div>
                                    <InputLabel for="description" value="–û–ø–∏—Å–∞–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)" />
                                    <textarea
                                        id="description"
                                        v-model="form.description"
                                        class="mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:focus:border-indigo-400 dark:focus:ring-indigo-400"
                                        rows="3"
                                        placeholder="–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–µ—Ç–∞–ª–∏ –∏–ª–∏ —Ü–µ–ª–∏ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è"
                                    ></textarea>
                                    <InputError class="mt-2" :message="form.errors.description" />
                                </div>

                                <!-- –¢–∏–ø —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è -->
                                <div>
                                    <InputLabel for="type" value="–¢–∏–ø —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è" />
                                    <select
                                        id="type"
                                        v-model="form.type"
                                        class="mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 dark:focus:border-indigo-400 dark:focus:ring-indigo-400"
                                        required
                                    >
                                        <option value="warmup">üî• –†–∞–∑–º–∏–Ω–∫–∞</option>
                                        <option value="technique">‚ö° –¢–µ—Ö–Ω–∏–∫–∞</option>
                                        <option value="repertoire">üéµ –†–µ–ø–µ—Ä—Ç—É–∞—Ä</option>
                                        <option value="improvisation">üé® –ò–º–ø—Ä–æ–≤–∏–∑–∞—Ü–∏—è</option>
                                        <option value="sight_reading">üëÄ –ß—Ç–µ–Ω–∏–µ —Å –ª–∏—Å—Ç–∞</option>
                                        <option value="theory">üìö –¢–µ–æ—Ä–∏—è</option>
                                        <option value="break">‚òï –ü–µ—Ä–µ—Ä—ã–≤</option>
                                        <option value="custom">‚≠ê –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π</option>
                                    </select>
                                    <InputError class="mt-2" :message="form.errors.type" />
                                </div>

                                <!-- –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å -->
                                <div>
                                    <InputLabel for="planned_duration" value="–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–º–∏–Ω—É—Ç—ã)" />
                                    <TextInput
                                        id="planned_duration"
                                        v-model="form.planned_duration"
                                        type="number"
                                        min="1"
                                        max="480"
                                        class="mt-1 block w-full"
                                        required
                                        placeholder="5"
                                    />
                                    <p class="mt-1 text-sm text-gray-500 dark:text-gray-400">–û—Ç 1 –¥–æ 480 –º–∏–Ω—É—Ç (8 —á–∞—Å–æ–≤)</p>
                                    <InputError class="mt-2" :message="form.errors.planned_duration" />
                                </div>

                                <!-- –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è -->
                                <div>
                                    <InputLabel for="scheduled_for" value="–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)" />
                                    <TextInput
                                        id="scheduled_for"
                                        v-model="form.scheduled_for"
                                        type="datetime-local"
                                        class="mt-1 block w-full"
                                    />
                                    <p class="mt-1 text-sm text-gray-500 dark:text-gray-400">–ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–æ, —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ –º–æ–∂–Ω–æ –Ω–∞—á–∞—Ç—å –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è</p>
                                    <InputError class="mt-2" :message="form.errors.scheduled_for" />
                                </div>
                            </div>

                            <!-- –ö–Ω–æ–ø–∫–∏ -->
                            <div class="flex items-center justify-end mt-6 space-x-3">
                                <SecondaryButton @click="router.visit('/exercises')" type="button">
                                    –û—Ç–º–µ–Ω–∞
                                </SecondaryButton>
                                <PrimaryButton :disabled="form.processing">
                                    {{ form.processing ? '–°–æ–∑–¥–∞–Ω–∏–µ...' : '–°–æ–∑–¥–∞—Ç—å —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ' }}
                                </PrimaryButton>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </AuthenticatedLayout>
</template>

<script setup lang="ts">
import { useForm, router } from '@inertiajs/vue3'
import AuthenticatedLayout from '@/Layouts/AuthenticatedLayout.vue'
import InputError from '@/Components/InputError.vue'
import InputLabel from '@/Components/InputLabel.vue'
import PrimaryButton from '@/Components/PrimaryButton.vue'
import SecondaryButton from '@/Components/SecondaryButton.vue'
import TextInput from '@/Components/TextInput.vue'

const form = useForm({
    title: '',
    description: '',
    type: 'custom',
    planned_duration: '5',
    scheduled_for: '',
})

const submit = () => {
    form.post(route('exercises.store'), {
        onSuccess: () => {
            // –£—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–æ
        },
    })
}
</script>