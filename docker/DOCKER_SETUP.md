# ๐ณ Docker Setup ะดะปั Music Practice Tracker

ะะพะปะฝะฐั Docker-ะบะพะฝัะธะณััะฐัะธั ะดะปั ะทะฐะฟััะบะฐ ะฒัะตะณะพ ััะตะบะฐ ะฟัะธะปะพะถะตะฝะธั.

## ๐๏ธ ะััะธัะตะบัััะฐ

```
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
โ     Nginx       โ    โ   PHP-FPM       โ    โ     MySQL       โ
โ   (Port 80)     โโโโโบโ   (Port 9000)   โโโโโบโ   (Port 3306)   โ
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
         โ                       โ                       โ
         โ                       โ                       โ
         โผ                       โผ                       โผ
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
โ     Redis       โ    โ     MinIO       โ    โ     Node.js     โ
โ   (Port 6379)   โ    โ (Port 9000/9001)โ    โ   (Build only)  โ
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
```

## ๐ ะัััััะน ััะฐัั

### 1. ะะพะปะฝะฐั ะฝะฐัััะพะนะบะฐ (ัะตะบะพะผะตะฝะดัะตััั)

```bash
# ะะปะพะฝะธััะนัะต ัะตะฟะพะทะธัะพัะธะน
git clone <repository-url>
cd music-practice-tracker

# ะะพะปะฝะฐั ะฝะฐัััะพะนะบะฐ Docker ะพะบััะถะตะฝะธั
make docker-setup
```

ะญัะฐ ะบะพะผะฐะฝะดะฐ:
- ะกะบะพะฟะธััะตั `.env.docker` ะฒ `.env`
- ะกะพะฑะตัะตั ะฒัะต Docker ะพะฑัะฐะทั
- ะะฐะฟัััะธั ะฒัะต ะบะพะฝัะตะนะฝะตัั
- ะะฐัััะพะธั Laravel (ะบะปัั, ะผะธะณัะฐัะธะธ, storage link)
- ะะพะบะฐะถะตั ัััะปะบะธ ะดะปั ะดะพัััะฟะฐ

### 2. ะััะฝะฐั ะฝะฐัััะพะนะบะฐ

```bash
# 1. ะะฐัััะพะนะบะฐ ะพะบััะถะตะฝะธั
cp .env.docker .env

# 2. ะกะฑะพัะบะฐ ะพะฑัะฐะทะพะฒ
docker-compose build

# 3. ะะฐะฟััะบ ะบะพะฝัะตะนะฝะตัะพะฒ
docker-compose up -d

# 4. ะะถะธะดะฐะฝะธะต ะทะฐะฟััะบะฐ ัะตัะฒะธัะพะฒ
sleep 30

# 5. ะะฐัััะพะนะบะฐ Laravel
docker-compose exec app php artisan key:generate
docker-compose exec app php artisan migrate
docker-compose exec app php artisan storage:link
```

## ๐ ะะพัััะฟ ะบ ัะตัะฒะธัะฐะผ

ะะพัะปะต ะทะฐะฟััะบะฐ ะฟัะธะปะพะถะตะฝะธะต ะฑัะดะตั ะดะพัััะฟะฝะพ ะฟะพ ัะปะตะดัััะธะผ ะฐะดัะตัะฐะผ:

- **๐ ะัะธะปะพะถะตะฝะธะต**: http://localhost
- **๐๏ธ MinIO Console**: http://localhost:9001
  - ะะพะณะธะฝ: `minioadmin`
  - ะะฐัะพะปั: `minioadmin123`
- **๐ MySQL**: localhost:3306
  - ะะฐะทะฐ: `music_tracker`
  - ะะพะปัะทะพะฒะฐัะตะปั: `music_tracker`
  - ะะฐัะพะปั: `music_tracker_password`
- **๐ด Redis**: localhost:6379

## ๐๏ธ ะฃะฟัะฐะฒะปะตะฝะธะต ะบะพะฝัะตะนะฝะตัะฐะผะธ

### ะัะฝะพะฒะฝัะต ะบะพะผะฐะฝะดั

```bash
# ะะฐะฟััะบ ะฒัะตั ะบะพะฝัะตะนะฝะตัะพะฒ
make docker-up

# ะััะฐะฝะพะฒะบะฐ ะฒัะตั ะบะพะฝัะตะนะฝะตัะพะฒ
make docker-down

# ะะตัะตะทะฐะฟััะบ ะบะพะฝัะตะนะฝะตัะพะฒ
make docker-restart

# ะกะฑะพัะบะฐ ะพะฑัะฐะทะพะฒ
make docker-build

# ะกะฑะพัะบะฐ ะฑะตะท ะบััะฐ
make docker-build-no-cache
```

### ะัะพัะผะพัั ะปะพะณะพะฒ

```bash
# ะัะต ะปะพะณะธ
make docker-logs

# ะะพะณะธ ะฟัะธะปะพะถะตะฝะธั
make docker-logs-app

# ะะพะณะธ Nginx
make docker-logs-nginx

# ะะพะณะธ MySQL
make docker-logs-mysql
```

### ะะพะดะบะปััะตะฝะธะต ะบ ะบะพะฝัะตะนะฝะตัะฐะผ

```bash
# ะะพะดะบะปััะตะฝะธะต ะบ ะฟัะธะปะพะถะตะฝะธั
make docker-shell

# ะะพะดะบะปััะตะฝะธะต ะบ MySQL
make docker-shell-mysql
```

## ๐ง ะะพะฝัะธะณััะฐัะธั ัะตัะฒะธัะพะฒ

### PHP-FPM (app)
- **ะะฑัะฐะท**: Custom PHP 8.2-FPM
- **ะะฐััะธัะตะฝะธั**: MySQL, Redis, GD, ZIP, OPcache
- **ะะพะฝัะธะณััะฐัะธั**: `docker/php/local.ini`
- **ะะฐะฑะพัะฐั ะดะธัะตะบัะพัะธั**: `/var/www/html`

### Nginx
- **ะะฑัะฐะท**: nginx:alpine
- **ะะพะฝัะธะณััะฐัะธั**: `docker/nginx/`
- **ะะพััั**: 80, 443
- **ะกัะฐัะธัะตัะบะธะต ัะฐะนะปั**: ะบััะธัะพะฒะฐะฝะธะต, ัะถะฐัะธะต

### MySQL
- **ะะฑัะฐะท**: mysql:8.0
- **ะะฐะทะฐ ะดะฐะฝะฝัั**: `music_tracker`
- **ะะฝะธัะธะฐะปะธะทะฐัะธั**: `docker/mysql/init/`
- **ะขะพะผ**: `mysql_data`

### Redis
- **ะะฑัะฐะท**: redis:7-alpine
- **ะะพะฝัะธะณััะฐัะธั**: ั ะฟะตััะธััะตะฝัะฝะพัััั
- **ะขะพะผ**: `redis_data`

### MinIO
- **ะะฑัะฐะท**: minio/minio:latest
- **ะะพะฝัะพะปั**: ะฟะพัั 9001
- **API**: ะฟะพัั 9000
- **ะะฒัะพะผะฐัะธัะตัะบะฐั ะฝะฐัััะพะนะบะฐ**: bucket `music-tracker-notes`

## ๐ ะกัััะบัััะฐ Docker ัะฐะนะปะพะฒ

```
docker/
โโโ mysql/
โ   โโโ init/
โ       โโโ 01-init.sql          # ะะฝะธัะธะฐะปะธะทะฐัะธั ะะ
โโโ nginx/
โ   โโโ default.conf             # ะะพะฝัะธะณััะฐัะธั ัะฐะนัะฐ
โ   โโโ nginx.conf               # ะัะฝะพะฒะฝะฐั ะบะพะฝัะธะณััะฐัะธั
โโโ php/
    โโโ local.ini                # ะะพะฝัะธะณััะฐัะธั PHP
```

## ๐งน ะัะธััะบะฐ

```bash
# ะัะธััะบะฐ ะบะพะฝัะตะนะฝะตัะพะฒ, ะพะฑัะฐะทะพะฒ ะธ ัะพะผะพะฒ
make docker-clean

# ะะปะธ ะฒัััะฝัั
docker-compose down -v --remove-orphans
docker system prune -f
```

## ๐ ะัะปะฐะดะบะฐ

### ะัะพะฒะตัะบะฐ ััะฐัััะฐ ะบะพะฝัะตะนะฝะตัะพะฒ

```bash
docker-compose ps
```

### ะัะพะฒะตัะบะฐ ะปะพะณะพะฒ

```bash
# ะะพะฝะบัะตัะฝัะน ัะตัะฒะธั
docker-compose logs app
docker-compose logs nginx
docker-compose logs mysql

# ะะพัะปะตะดะฝะธะต 100 ัััะพะบ
docker-compose logs --tail=100 app
```

### ะะพะดะบะปััะตะฝะธะต ะบ ะบะพะฝัะตะนะฝะตัั

```bash
# Bash ะฒ ะบะพะฝัะตะนะฝะตัะต ะฟัะธะปะพะถะตะฝะธั
docker-compose exec app bash

# MySQL CLI
docker-compose exec mysql mysql -u music_tracker -p music_tracker
```

### ะัะพะฒะตัะบะฐ ัะตัะตะน

```bash
docker network ls
docker network inspect music-practice-tracker_music-tracker-network
```

## ๐ ะะตะทะพะฟะฐัะฝะพััั

- ะัะต ัะตัะฒะธัั ัะฐะฑะพัะฐัั ะฒ ะธะทะพะปะธัะพะฒะฐะฝะฝะพะน ัะตัะธ
- Nginx ะฝะฐัััะพะตะฝ ั security headers
- PHP ั ะพะณัะฐะฝะธัะตะฝะธัะผะธ ะฝะฐ ะทะฐะณััะทะบั ัะฐะนะปะพะฒ
- MySQL ั ะพัะดะตะปัะฝัะผ ะฟะพะปัะทะพะฒะฐัะตะปะตะผ (ะฝะต root)

## ๐ ะะพะฝะธัะพัะธะฝะณ

### Health checks

```bash
# ะัะพะฒะตัะบะฐ ะทะดะพัะพะฒัั ะบะพะฝัะตะนะฝะตัะพะฒ
docker-compose ps

# ะัะพะฒะตัะบะฐ health check ะฟัะธะปะพะถะตะฝะธั
curl http://localhost/health
```

### ะะตััััั

```bash
# ะัะฟะพะปัะทะพะฒะฐะฝะธะต ัะตััััะพะฒ
docker stats
```

## ๐ ะัะพะดะฐะบัะตะฝ

ะะปั ะฟัะพะดะฐะบัะตะฝะฐ ัะตะบะพะผะตะฝะดัะตััั:

1. ะัะฟะพะปัะทะพะฒะฐัั ะพัะดะตะปัะฝัะน `.env.production`
2. ะะฐัััะพะธัั SSL ัะตััะธัะธะบะฐัั
3. ะัะฟะพะปัะทะพะฒะฐัั ะฒะฝะตัะฝะธะต ัะพะผะฐ ะดะปั ะดะฐะฝะฝัั
4. ะะฐัััะพะธัั ะผะพะฝะธัะพัะธะฝะณ ะธ ะปะพะณะธัะพะฒะฐะฝะธะต
5. ะัะฟะพะปัะทะพะฒะฐัั Docker Swarm ะธะปะธ Kubernetes

## โ ะงะฐััะพ ะทะฐะดะฐะฒะฐะตะผัะต ะฒะพะฟัะพัั

### Q: ะะพะฝัะตะนะฝะตัั ะฝะต ะทะฐะฟััะบะฐัััั
A: ะัะพะฒะตัััะต ะปะพะณะธ: `make docker-logs` ะธ ัะฑะตะดะธัะตัั, ััะพ ะฟะพััั ัะฒะพะฑะพะดะฝั.

### Q: ะะฐะทะฐ ะดะฐะฝะฝัั ะฝะต ะฟะพะดะบะปััะฐะตััั
A: ะฃะฑะตะดะธัะตัั, ััะพ MySQL ะบะพะฝัะตะนะฝะตั ะทะฐะฟััะตะฝ: `docker-compose ps`

### Q: ะกัะฐัะธัะตัะบะธะต ัะฐะนะปั ะฝะต ะทะฐะณััะถะฐัััั
A: ะัะพะฒะตัััะต, ััะพ ะฒัะฟะพะปะฝะตะฝ `php artisan storage:link`

### Q: MinIO ะฝะตะดะพัััะฟะตะฝ
A: ะัะพะฒะตัััะต, ััะพ MinIO ะบะพะฝัะตะนะฝะตั ะทะฐะฟััะตะฝ ะธ bucket ัะพะทะดะฐะฝ.

---

**๐ต ะะพัะพะฒะพ ะบ ัะฐะทัะฐะฑะพัะบะต!** ะะฐัะต Docker ะพะบััะถะตะฝะธะต ะฝะฐัััะพะตะฝะพ ะธ ะณะพัะพะฒะพ ะบ ัะฐะฑะพัะต.